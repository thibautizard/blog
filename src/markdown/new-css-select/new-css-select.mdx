import ClassicSelect from "./assets/classic-select";
import BaseSelect from "./assets/base-select";
import BaseSelectFrameworks from "./assets/base-select-frameworks";
import LinkWithGlimpse from "@/markdown/-components/link-with-glimpse";
import { Select, SelectContent, SelectGroup, SelectItem, SelectLabel, SelectTrigger, SelectValue } from "./assets/shadcn-select";

export const metadata = {
    title: "Les dropdowns personnalisÃ©s sont enfin lÃ  ğŸ‘¨â€ğŸ¨ ",
    date: "2025-12-24",
    excerpt: "Eh ouais, plus besoin de passer par une librairie pour avoir des selecteurs stylÃ©s ğŸ˜",
}

Tout dÃ©veloppeur frontend **connaÃ®t comme sa poche le** `<select>` **utilisÃ© pour crÃ©er un menu dÃ©roulant**, l'un des tout premiers avec lesquels on joue lorsqu'on fait ses gammes en HTML.

<ClassicSelect />

```html
<select>
    <option value="1">Apple ğŸ</option>
    <option value="2">Banana ğŸŒ</option>
    <option value="3">Cherry ğŸ’</option>
</select>
```

En dÃ©pit de sa simplicitÃ©, **ce** `<select>` **Ã©tait jusqu'Ã  prÃ©sent trÃ¨s peu personnalisable** au grand dam des dÃ©veloppeurs chargÃ©s d'intÃ©grer des maquettes avec des spÃ©cifications trÃ¨s prÃ©cises en termes de design.

**Impossible, par exemple, de changer directement la flÃ¨che Ã  droite du selecteur** ou **l'apparence des options du menu dÃ©roulant** sans tomber dans des stratÃ©gies de contournement assez lourdes qui donnent l'impression de travailler contre plutÃ´t qu'avec les API web.

En s'y refusant, on se trouve **coincÃ© avec un rendu visuel dictÃ© par le navigateur et le systÃ¨me d'exploitation de l'utilisateur** ce qui signifie que leur apparence varie d'une plateforme Ã  l'autre. Pas top pour un site ou une application qui cherche Ã  maintenir une identitÃ© visuelle cohÃ©rente...

La tentation est alors forte de **recrÃ©er soi-mÃªme** un `<select>` en bricolant avec des `<div>` ou des `<button>` ou de **se tourner vers des librairies de composants** pour avoir complÃ¨tement la main sur son apparence.

Piochons dans cette derniÃ¨re catÃ©gorie avec le `select` de la librairie <LinkWithGlimpse url="https://ui.shadcn.com/docs/components/select">Shadcn UI</LinkWithGlimpse> est l'un des plus utilisÃ©s ğŸ‘‡

<div className="max-w-[200px] flex my-10 flex-col gap-2 mx-auto">
 <label className="font-bold text-decoration-underline" htmlFor="select">
   <span> `<select>` Shadcn UI </span>
 </label>
 <Select>
      <SelectTrigger className="w-[180px]">
        <SelectValue placeholder="Select a fruit" />
      </SelectTrigger>
      <SelectContent>
        <SelectGroup>
          <SelectItem value="apple">Apple ğŸ</SelectItem>
          <SelectItem value="banana">Banana ğŸŒ</SelectItem>
          <SelectItem value="cherry">Cherry ğŸ’</SelectItem>
          <SelectItem value="blueberry">Blueberry ğŸ«</SelectItem>
          <SelectItem value="grapes">Grapes ğŸ‡</SelectItem>
          <SelectItem value="kiwi">Kiwi ğŸ¥</SelectItem>
          <SelectItem value="lemon">Lemon ğŸ‹</SelectItem>
        </SelectGroup>
      </SelectContent>
    </Select>
</div>

Ã€ la lecture du code source, on rÃ©alise toutefois qu'**il ne s'agit pas d'un vrai `<select>`** mais d'un `<button>` augmentÃ© de plusieurs attributsqui de surcroÃ®t **requiert d'importer une librairie Javascript** (ici `@radix-ui/react-select`) pour reproduire fidÃ¨lement le comportement d'un `<select>` natif.

```tsx
import * as SelectPrimitive from "@radix-ui/react-select";
```

Plusieurs raisons rendent cette situation insatisfaisante. D'abord parce qu'en **s'en remettant Ã  l'API d'un composant externe**, **on perd le bÃ©nÃ©fice d'une implÃ©mentation native et performante** du composant `<select>` parfaitement optimisÃ©e pour le navigateur. Ensuite parce que cela **nous contraint Ã  ajouter une dÃ©pendance Ã  notre projet** pour Ã©muler un comportement dÃ©jÃ  existant Ã  la seule fin de contourner ses limitations stylistiques.

**Pourquoi ne pas tenter alors une implÃ©mentation personnelle de notre `<select>` ?** Eh bien, c'est sÃ»rement beaucoup moins simple que vous ne l'imaginez ! Beaucoup de difficultÃ©s Ã©mergent rapidement en raison des **nombreux aspects fonctionnels que doit couvrir un menu dÃ©roulant correct** :

* Navigation clavier et gestion du focus (accessibilitÃ©)
* Ouverture d'un composant sÃ©lecteur adaptÃ© pour mobile
* DÃ©tection du clic Ã  l'extÃ©rieur pour la fermeture
* Repositionnement selon la bordure de fenÃªtre la plus proche
* Chevauchement possible avec d'autres Ã©lÃ©ments, adaptation mobile et tablette etc.

<div className="w-full text-center text-[26px]!">
ğŸ˜®â€ğŸ’¨
</div>

### Chrome notre sauveur (again)

Mais voilÃ  que depuis peu, on peut enfin styliser un `<select>` jusque dans ses moindres dÃ©tails !

La premiÃ¨re Ã©tape consiste Ã  dÃ©sactiver le style par dÃ©faut du `<select>` attribuÃ© par votre navigateur avec la nouvelle propriÃ©tÃ© `appearance: base-select`.

```scss
.custom-select {
  &, &::picker(select) {
    appearance: base-select;
  }
}
```

On obtient alors un `<select>` qui est dÃ©sormais totalement personnalisable !

<BaseSelect />


Bon, rien de bien diffÃ©rent Ã  premiÃ¨re vue, celui-ci paraÃ®t mÃªme moins "beau".

En rÃ©alitÃ© ce `<select>` offre de toutes nouvelles possibilitÃ©s ğŸ¦¸ Explorons-en quelques-unes !

#### InsÃ©rer des images ou des svg

On peut dorÃ©navant introduire dans chaque `<option>` de notre `<select>` "basÃ©" des Ã©lÃ©ments visuels (images, svg etc.) â€” dans l'implÃ©mentation classique ceux-ci Ã©taient purement ignorÃ©s par le *parser* du navigateur.

<BaseSelectFrameworks />

```html
<select class="custom-select">
  <option>
    <svg aria-hidden>â€¦</svg>
    <span>React</span>
  </option>
  <option>
    <svg aria-hidden>â€¦</svg>
    <span>Vue</span>
  </option>
  <option>
    <svg aria-hidden>â€¦</svg>
    <span>Angular</span>
  </option>
</select>
```

<div className="useful-links">
    #### ğŸ”— Liens additionnels
    - <LinkWithGlimpse url="https://developer.chrome.com/blog/a-customizable-select">Chrome for Developers - The &lt;select&gt; element can now be customized with CSS</LinkWithGlimpse>
    - <LinkWithGlimpse url="https://una.im/select-updates/">Updates to the customizable select API</LinkWithGlimpse>
    - <LinkWithGlimpse url="https://developer.mozilla.org/en-US/docs/Learn_web_development/Extensions/Forms/Customizable_select">MDN - Customizable select elements</LinkWithGlimpse>
    - <LinkWithGlimpse url="https://chrome.dev/css-wrapped-2025/#customizable-select">CSS Wrapped 2025</LinkWithGlimpse>
</div>
