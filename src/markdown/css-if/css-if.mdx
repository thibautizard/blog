import SpecialComponent from "./components/special-component";
import BadgeOld from "./components/badge-old";

export const metadata = {
	title: "Utiliser if dans du... CSS üò±",
	date: "2025-07-14",
	excerpt: "Il est dor√©navant possible d'utiliser un if dans son propre CSS !",
};

Le CSS n'en finit plus de se transformer et d'__incorporer toujours plus de nouvelles fonctionnalit√©s__ qui requ√©raient auparavant de passer par des pr√©-processeurs type Sass ou Less.

C'est encore le cas avec l'arriv√©e de la tr√®s attendue (et inesp√©r√©e !) fonction `if()` pour g√©rer des __styles conditionnels__.

Prenons un cas d'usage assez banal avec ces badges refl√©tant un statut :


<div className="flex flex-wrap max-w-[300px] justify-center gap-3 my-8 mx-auto">
	<BadgeOld status="pending" />
	<BadgeOld status="success" />
	<BadgeOld status="error" />
	<BadgeOld status="warning" />
	<BadgeOld status="info" />
</div>

Chaque badge porte un attribut `data-status`. On souhaite alors diff√©rencier le style de chaque badge en fonction de la valeur de cet attribut.

Jusqu'√† pr√©sent, on pouvait d√©finir des variables CSS √† la port√©e limit√©e dont on manipulera ensuite la valeur :

```css
.badge {
    --color: #0ea5e9; /* fallback color */
    --background-color: #cffafe; /* fallback background color */

    border: 1px solid var(--color);
    background-color: var(--background-color);
    color: var(--color);

   /* ... */
}
```
	
<br/>

<BadgeOld status="pending" />
```css
.badge[data-status="pending"] { 
    --color: #9333ea;
    --border-color: #f5f3ff;
}
```

<br/>

<BadgeOld status="success" />
```css
.badge[data-status="success"] { 
    --color: #16a34a;
    --background-color: #dcfce7;
}
```

<br/>

<BadgeOld status="error" />
```css
.badge[data-status="error"] { 
    --color: #ef4444;
    --background-color: #fee2e2;
}
```

Ici on conditionne bien l'application d'un style en fonction de la valeur de l'attribut `data-status`. Mais cette forme conditionnelle est implicite et n√©cessite d'√©crire plusieurs s√©lecteurs CSS tournant autour des valeurs possibles que peut prendre l'attribut `data-status`.

Avec la nouvelle fonction `if()`, on peut au sein du m√™me s√©lecteur d√©finir les changements de valeur pour chaque variante :

```css {2}
.badge {
	--status: attr(data-status type(<custom-indent>));

	color: if(
		style(--status: pending): #9333ea;
		style(--status: success): #16a34a;
		style(--status: error): #ef4444;
		else: #0ea5e9);

	background-color: if(
		style(--status: pending): #f5f3ff;
		style(--status: success): #dcfce7;
		style(--status: error): #fee2e2;
		else: #cffafe);
}

```

Tout se joue dans la d√©finition d'une unique propri√©t√© CSS custom `--status` sorte de jumeau de l'attribut HTML `data-status` dont on va pouvoir comparer la valeur pour red√©finir le style d'autres propri√©t√©s CSS.

La syntaxe est un poil moins verbeuse  ü§è et surtout beaucoup plus claire √† la premi√®re lecture !

### Compatibilit√© avec les navigateurs

Comme souvent, __c'est Chrome qui a pris les devants en termes de support__ en embarquant le `if()` d√®s la version 137 (sortie fin mai 2025). La plupart des autres navigateurs non bas√©s sur Chromium sont encore aux fraises sur le sujet donc __prudence prudence avant d'envoyer √ßa en production__.

### Quelques r√©serves

Le revers de la m√©daille avec ces syntaxes plus "programmatiques" c'est que le CSS __s'√©loigne de sa nature tr√®s d√©clarative__ et **devient** __de plus en plus proche d'un langage de programmation__ avec un co√ªt de ma√Ætrise qui s'√©l√®ve progressivement. 

Or c'est cet aspect d√©claratif commun √† HTML et CSS qui permettait de limiter la casse lorsqu'on envoyait du CSS trop r√©cent dans des navigateurs avec des versions anciennes puisqu'__il leur suffit alors de zapper les propri√©t√©s ou valeurs inconnues__ ‚Äî l√† o√π le compilateur de Javascript crashe salement s'il croise une syntaxe inconnue post√©rieur √† sa version maximum support√©e. 

√Ä voir donc si ce surplus de logique dans le CSS ne va pas __aggraver les probl√®mes de r√©trocompatibilit√©__ puisque l'interpr√©tation en deviendra plus d√©licate.

<div className="video-container">
	<iframe
	width="560"
	height="315"
	src="https://www.youtube.com/embed/Apn8ucs7AL0"
	title="YouTube video player"
	frameBorder="0"
	allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
	allowFullScreen
	style={{ margin: "2rem auto", maxWidth: "100%" }}
	/>
</div>

<div className="useful-links">
#### Liens additionnels
- üîó [Documentation MDN](https://developer.mozilla.org/en-US/docs/Web/CSS/if)
</div>
