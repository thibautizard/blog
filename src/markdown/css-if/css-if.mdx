import SpecialComponent from "./components/special-component";
import BadgeOld from "./components/badge-old";

export const metadata = {
	title: "Utiliser if dans du... CSS üò±",
	date: "2025-07-14",
	excerpt: "Il est dor√©navant possible d'utiliser un if dans son propre CSS !",
};

Le CSS n'en finit plus de se transformer et d'__incorporer toujours plus de nouvelles fonctionnalit√©s__ qui requ√©raient auparavant de passer par des pr√©-processeurs type Sass ou Less.

C'est encore le cas avec l'arriv√©e de la tr√®s attendue (et inesp√©r√©e !) fonction `if()` pour styliser un √©l√©ment en fonction de la valeur d'un de ses attributs.

Prenons un cas d'usage assez banal avec ces badges refl√©tant un statut :


<div className="flex flex-wrap max-w-[300px] justify-center gap-3 my-8 mx-auto">
	<BadgeOld status="pending" />
	<BadgeOld status="success" />
	<BadgeOld status="error" />
	<BadgeOld status="warning" />
	<BadgeOld status="info" />
</div>

Chaque badge porte un attribut `data-status`. On souhaite alors diff√©rencier la couleur de chaque badge en fonction de la valeur pass√©e √† `data-status` (`pending`, `success`, `error`, etc.).

### Sans `if()`

Plusieurs solutions sont possibles. Personellement, j'ai l'habitude de __cr√©er des variables CSS__ pour contr√¥ler les propri√©t√©s CSS qui m'int√©ressent et d'en modifier ensuite les valeurs dans diff√©rents sous-s√©lecteurs CSS qui reprennent tous les `[data-status="XXX"]` possibles.


```css
.badge {
	--color: #0ea5e9; /* fallback color */
    --background-color: #cffafe; /* fallback background color */

    border: 1px solid var(--color);
    background-color: var(--background-color);
    color: var(--color);

   /* ... */
}
````
<br/>

<BadgeOld status="pending" />
```css
.badge[data-status="pending"] { 
    --color: #9333ea;
    --border-color: #f5f3ff;
}
```

<br/>

<BadgeOld status="success" />
```css
.badge[data-status="success"] { 
    --color: #16a34a;
    --background-color: #dcfce7;
}
```

<br/>

<BadgeOld status="error" />
```css
.badge[data-status="error"] { 
    --color: #ef4444;
    --background-color: #fee2e2;
}
```

L'inconv√©nient de cette approche est que la forme conditionnelle n'est pas forc√©ment explicite et n√©cessite d'√©crire plusieurs s√©lecteurs CSS.

### Avec `if()`

Avec cette nouvelle fonction `if()`, on peut au sein d'un m√™me s√©lecteur d'√©l√©ment vis√© d√©finir tous les changements pour chaque valeur de `data-status` :

```css {2}
.badge {
	--status: attr(data-status type(<custom-indent>));

	color: if(
		style(--status: pending): #9333ea;
		style(--status: success): #16a34a;
		style(--status: error): #ef4444;
		else: #0ea5e9);

	background-color: if(
		style(--status: pending): #f5f3ff;
		style(--status: success): #dcfce7;
		style(--status: error): #fee2e2;
		else: #cffafe);
}
```

Tout se joue dans la d√©finition d'une unique propri√©t√© CSS custom `--status` qui r√©cup√®re la valeur de l'attribut HTML `[data-status]` et qu'on peut ensuite comparer au sein de nos diff√©rentes conditions pour d√©cider la bonne valeur √† donner √† nos propri√©t√©s CSS pour chaque cas.

La syntaxe est un poil moins verbeuse  ü§è et surtout beaucoup plus claire √† la premi√®re lecture !

### Compatibilit√© avec les navigateurs

Comme souvent, __c'est Chrome qui a pris les devants en termes de support__ en embarquant le `if()` d√®s la version 137 (sortie fin mai 2025). La plupart des autres navigateurs non bas√©s sur Chromium sont encore aux fraises sur le sujet, __la prudence est donc de mise avant d'envoyer √ßa en production__.

### Est-ce une si bonne id√©e ?

Oui, dans la mesure o√π on peut d√©finir et r√©gler de __fa√ßon bien plus √©l√©gante__ et __maintenable__ certains probl√®mes de layout et de style. L'exemple propos√© par __[Una Kravets](https://www.youtube.com/@UnaKravets)__ pour classer des tickets dans diff√©rentes colonnes dans la vid√©o qu'elle consacre √† la fonction `if()` est particuli√®rement ing√©nieux et permet bien de sentir l'int√©r√™t de cette nouvelle fonctionnalit√©.

<div className="video-container">
	<iframe
	width="560"
	height="315"
	src="https://www.youtube.com/embed/Apn8ucs7AL0"
	title="YouTube video player"
	frameBorder="0"
	allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
	allowFullScreen
	style={{ margin: "2rem auto", maxWidth: "100%" }}
	/>
</div>

Le revers de la m√©daille cependant avec ces syntaxes plus "programmatiques" qui √©mergent c'est qu'elles tendent √† __√©loigner le CSS de sa nature tr√®s d√©clarative__ et √† le rapprocher d'un langage de programmation avec un co√ªt d'entr√©e et de ma√Ætrise qui s'√©l√®ve de plus en plus. 

Or c'est pr√©cis√©ment cet aspect d√©claratif commun √† HTML et CSS qui permet de limiter la casse lorsqu'on envoyait du CSS trop r√©cent dans des navigateurs avec des versions anciennes puisqu'__il suffisait √† l'interpr√©teur de zapper les propri√©t√©s ou valeurs inconnues__ ‚Äî l√† o√π le compilateur de Javascript crashe m√©chamment s'il croise une syntaxe inconnue post√©rieur √† sa version maximum support√©e. 

√Ä voir donc si ce surplus de logique dans le CSS ne va pas __aggraver les probl√®mes de r√©trocompatibilit√©__ puisque l'interpr√©tation en deviendra plus d√©licate ‚Äî m√™me si des outils comme [PostCSS](https://postcss.org/) permettent g√©n√©ralement de lever cette difficult√© en transpilant le CSS moderne pour le rendre compatible avec les anciennes versions de navigateurs.


<div className="useful-links">
#### Liens additionnels
- üîó [Documentation MDN](https://developer.mozilla.org/en-US/docs/Web/CSS/if)
</div>
